{"version":3,"sources":["language.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"language.js","sourcesContent":["var BLanguage = BLanguage || {};\n\nBLanguage.formatState = function (state) {\n    if (!state.id) {\n        return state.text;\n    }\n    return $('<span><img src=\"' + $('#language_flag_path').val() + state.element.value.toLowerCase() + '.png\" class=\"img-flag\" /> ' + state.text + '</span>');\n};\n\nBLanguage.bindEventToElement = function () {\n    if (jQuery().select2) {\n\n        $('.select-search-language').select2({\n            width: '100%',\n            templateResult: BLanguage.formatState,\n            templateSelection: BLanguage.formatState\n        });\n    }\n\n    var table_language = $('.table-language');\n\n    $(document).on('change', '#language_id', function () {\n        var language = $(this).find('option:selected').data('language');\n        if (typeof language != 'undefined' && language.length > 0) {\n            $('#lang_name').val(language[2]);\n            $('#lang_locale').val(language[0]);\n            $('#lang_code').val(language[1]);\n            $('#flag_list').val(language[4]).trigger('change');\n            $('.lang_is_' + language[3]).prop('checked', true);\n            $('#btn-language-submit-edit').prop('id', 'btn-language-submit').text('Add new language');\n        }\n    });\n\n    //Botble.callScroll($('.table-language'));\n\n    $(document).on('click', '#btn-language-submit', function (event) {\n        event.preventDefault();\n        var name = $('#lang_name').val();\n        var locale = $('#lang_locale').val();\n        var code = $('#lang_code').val();\n        var flag = $('#flag_list').val();\n        var order = $('#lang_order').val();\n        var is_rtl = $('.lang_is_rtl').prop('checked') ? 1 : 0;\n        BLanguage.createOrUpdateLanguage(0, name, locale, code, flag, order, is_rtl, 0);\n    });\n\n    $(document).on('click', '#btn-language-submit-edit', function (event) {\n        event.preventDefault();\n        var id = $('#lang_id').val();\n        var name = $('#lang_name').val();\n        var locale = $('#lang_locale').val();\n        var code = $('#lang_code').val();\n        var flag = $('#flag_list').val();\n        var order = $('#lang_order').val();\n        var is_rtl = $('.lang_is_rtl').prop('checked') ? 1 : 0;\n        BLanguage.createOrUpdateLanguage(id, name, locale, code, flag, order, is_rtl, 1);\n    });\n\n    table_language.on('click', '.deleteDialog', function (event) {\n        event.preventDefault();\n\n        $('#delete-crud-entry').data('section', $(this).data('section'));\n        $('#delete-crud-modal').modal('show');\n    });\n\n    $('#delete-crud-entry').on('click', function (event) {\n        event.preventDefault();\n        $('#delete-crud-modal').modal('hide');\n\n        var deleteURL = $(this).data('section');\n\n        $.ajax({\n            url: deleteURL,\n            type: 'GET',\n            success: function (data) {\n                if (data.error) {\n                    Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                } else {\n                    if (data.data) {\n                        table_language.find('i[data-id=' + data.data + ']').unwrap();\n                        $('.tooltip').remove();\n                    }\n                    table_language.find('a[data-section=\"' + deleteURL + '\"]').closest('tr').remove();\n                    Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n                }\n            },\n            error: function (data) {\n                Botble.handleError(data);\n            }\n        });\n    });\n\n    table_language.on('click', '.set-language-default', function (event) {\n        event.preventDefault();\n        var _self = $(this);\n\n        $.ajax({\n            url: _self.data('section'),\n            type: 'GET',\n            success: function (data) {\n                if (data.error) {\n                    Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                } else {\n                    var star = table_language.find('td > i');\n                    star.replaceWith('<a data-section=\"' + BLanguage.routes.set_default + '?lang_id=' + star.data('id') + '\" class=\"set-language-default tip\" data-original-title=\"Choose ' + star.data('name') + ' as default language\">' + star.closest('td').html() + '</a>');\n                    _self.find('i').unwrap();\n                    $('.tooltip').remove();\n                    Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n                }\n            },\n            error: function (data) {\n                Botble.handleError(data);\n            }\n        });\n    });\n\n    table_language.on('click', '.edit-language-button', function (event) {\n        event.preventDefault();\n        var _self = $(this);\n\n        $.ajax({\n            url: BLanguage.routes.get_language + '?lang_id=' + _self.data('id'),\n            type: 'GET',\n            success: function (data) {\n                if (data.error) {\n                    Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                } else {\n                    var language = data.data;\n                    $('#lang_id').val(language.lang_id);\n                    $('#lang_name').val(language.lang_name);\n                    $('#lang_locale').val(language.lang_locale);\n                    $('#lang_code').val(language.lang_code);\n                    $('#flag_list').val(language.lang_flag).trigger('change');\n                    if (language.lang_rtl) {\n                        $('.lang_is_rtl').prop('checked', true);\n                    }\n                    $('#lang_order').val(language.lang_order);\n\n                    $('#btn-language-submit').prop('id', 'btn-language-submit-edit').text('Update');\n                }\n            },\n            error: function (data) {\n                Botble.handleError(data);\n            }\n        });\n    });\n};\n\nBLanguage.createOrUpdateLanguage = function (id, name, locale, code, flag, order, is_rtl, edit) {\n    var url = BLanguage.routes.store;\n    if (edit) {\n        url = BLanguage.routes.edit + '?lang_code=' + code;\n    }\n    $.ajax({\n        url: url,\n        type: 'POST',\n        data: {\n            lang_id: id,\n            lang_name: name,\n            lang_locale: locale,\n            lang_code: code,\n            lang_flag: flag,\n            lang_order: order,\n            lang_is_rtl: is_rtl\n        },\n        success: function (data) {\n            if (data.error) {\n                Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n            } else {\n                if (edit) {\n                    $('.table-language').find('tr[data-id=' + id + ']').replaceWith(data.data);\n                } else {\n                    $('.table-language').append(data.data);\n                }\n                Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n            }\n\n            $('#language_id').val('').trigger('change');\n            $('#lang_name').val('');\n            $('#lang_locale').val('');\n            $('#lang_code').val('');\n            $('#flag_list').val('').trigger('change');\n            $('.lang_is_ltr').prop('checked', true);\n\n            $('#btn-language-submit-edit').prop('id', 'btn-language-submit').text('Add new language');\n        },\n        error: function (data) {\n            Botble.handleError(data);\n        }\n    });\n};\n\n$(document).ready(function () {\n    BLanguage.bindEventToElement();\n});"]}