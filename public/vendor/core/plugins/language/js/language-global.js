$(document).ready(function(){var a=$("#post_lang_choice");a.data("prev",a.val()),a.on("change",function(){$(".change_to_language_text").text($(this).find("option:selected").text()),$("#confirm-change-language-modal").modal("show")}),$("#confirm-change-language-modal .btn-primary").on("click",function(e){e.preventDefault(),a.val(a.data("prev")).trigger("change"),$("#confirm-change-language-modal").modal("hide")}),$("#confirm-change-language-button").on("click",function(e){e.preventDefault();var n=a,t=$("#language_flag_path").val();$.ajax({url:$("div[data-change-language-route]").data("change-language-route"),data:{lang_meta_current_language:n.val(),lang_meta_content_id:$("#lang_meta_content_id").val(),lang_meta_reference:$("#lang_meta_reference").val(),lang_meta_created_from:$("#lang_meta_created_from").val()},type:"POST",success:function(e){if($(".active-language").html('<img src="'+t+n.find("option:selected").data("flag")+'.png" title="'+n.find("option:selected").text()+'" alt="'+n.find("option:selected").text()+'" />'),!e.error){$(".current_language_text").text(n.find("option:selected").text());var l="";$.each(e.data,function(a,e){l+='<img src="'+t+e.lang_flag+'.png" title="'+e.lang_name+'" alt="'+e.lang_name+'">',e.lang_meta_content_id?l+='<a href="'+$("#route_edit").val()+'"> '+e.lang_name+' <i class="fa fa-edit"></i> </a><br />':l+='<a href="'+$("#route_create").val()+"?ref_from="+$("#content_id").val()+"&ref_lang="+a+'"> '+e.lang_name+' <i class="fa fa-plus"></i> </a><br />'}),$("#list-others-language").html(l),$("#confirm-change-language-modal").modal("hide"),a.data("prev",a.val())}},error:function(a){Botble.showNotice("error",a.message,Botble.languages.notices_msg.error)}})})});var BBLanguage={init:function(){$(document).on("click",".change-data-language-item",function(a){a.preventDefault(),window.location.href=$(this).find("a span").data("href")})}};$(document).ready(function(){BBLanguage.init()});