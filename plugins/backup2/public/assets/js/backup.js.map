{"version":3,"sources":["backup.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"backup.js","sourcesContent":["$(document).ready(function () {\n    var table_backup = $('#table-backups');\n    table_backup.on('click', '.deleteDialog', function (event) {\n        event.preventDefault();\n\n        $('#delete-crud-entry').data('section', $(this).data('section'));\n        $('#delete-crud-modal').modal('show');\n    });\n\n    table_backup.on('click', '.restoreBackup', function (event) {\n        event.preventDefault();\n        $('#restore-backup-button').data('section', $(this).data('section'));\n        $('#restore-backup-modal').modal('show');\n    });\n\n    $('#delete-crud-entry').on('click', function (event) {\n        event.preventDefault();\n        $('#delete-crud-modal').modal('hide');\n\n        var deleteURL = $(this).data('section');\n\n        $.ajax({\n            url: deleteURL,\n            type: 'GET',\n            success: function (data) {\n                if (data.error) {\n                    Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                } else {\n                    table_backup.find('a[data-section=\"' + deleteURL + '\"]').closest('tr').remove();\n                    Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n                }\n            },\n            error: function (data) {\n                Botble.handleError(data);\n            }\n        });\n    });\n\n    $('#restore-backup-button').on('click', function (event) {\n        event.preventDefault();\n        var _self = $(this);\n        _self.html('<i class=\"fa fa-spin fa-spinner\" aria-hidden=\"true\"></i> ' + _self.text());\n\n        $.ajax({\n            url: _self.data('section'),\n            type: 'GET',\n            success: function (data) {\n                _self.find('i').remove();\n                _self.closest('.modal').modal('hide');\n\n                if (data.error) {\n                    Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                } else {\n                    Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n                    window.location.reload();\n                }\n            },\n            error: function (data) {\n                _self.find('i').remove();\n                Botble.handleError(data);\n            }\n        });\n    });\n\n    $(document).on('click', '#generate_backup', function (event) {\n        event.preventDefault();\n        $('#name').val('');\n        $('#description').val('');\n        $('#create-backup-modal').modal('show');\n    });\n\n    $('#create-backup-modal').on('click', '#create-backup-button', function (event) {\n        event.preventDefault();\n        var _self = $(this);\n        _self.html('<i class=\"fa fa-spin fa-spinner\" aria-hidden=\"true\"></i> ' + _self.text());\n\n        var name = $('#name').val();\n        var description = $('#description').val();\n        var error = false;\n        if (name === '' || name === null) {\n            error = true;\n            Botble.showNotice('error', 'Backup name is required!', Botble.languages.notices_msg.error);\n        }\n        if (description === '' || description === null) {\n            error = true;\n            Botble.showNotice('error', 'Backup description is required!', Botble.languages.notices_msg.error);\n        }\n\n        if (!error) {\n            $.ajax({\n                url: $('div[data-route-create]').data('route-create'),\n                type: 'POST',\n                data: {\n                    name: name,\n                    description: description\n                },\n                success: function (data) {\n                    _self.find('i').remove();\n                    _self.closest('.modal').modal('hide');\n\n                    if (data.error) {\n                        Botble.showNotice('error', data.message, Botble.languages.notices_msg.error);\n                    } else {\n                        table_backup.find('tbody').append(data.data);\n                        Botble.showNotice('success', data.message, Botble.languages.notices_msg.success);\n                    }\n                },\n                error: function (data) {\n                    _self.find('i').remove();\n                    Botble.handleError(data);\n                }\n            });\n        } else {\n            _self.find('i').remove();\n        }\n    });\n});"]}